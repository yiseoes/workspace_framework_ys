<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>06jQueryAjaxJSON-orderClient</title>

  <!-- jQuery 2.1.4 -->
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

  <style>
    body { font-family: Arial, "ë§‘ì€ ê³ ë”•", sans-serif; margin: 24px; }
    .row { margin-bottom: 12px; }
    label { display:inline-block; width:80px; }
    input[type="text"] { width: 240px; padding: 6px; }
    textarea { width: 332px; height: 120px; padding: 8px; }
    .btn { padding: 8px 14px; cursor: pointer; }
  </style>

  <script type="text/javascript">
    $(function () {

      // == ì „ì†¡ ë²„íŠ¼ í´ë¦­ ==
      $("#btnSend").on("click", function (e) {
        e.preventDefault(); // í¼ ê¸°ë³¸ ì œì¶œ ë§‰ê¸°

        // 1) ì…ë ¥ê°’ ìˆ˜ì§‘
        var name  = $.trim($("#name").val());
        var phone = $.trim($("#phone").val());

        if (!name || !phone) {
          alert("ì´ë¦„ê³¼ ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì¤˜ ğŸ˜Š");
          return;
        }
        
		//ì‘ë‹µì„ ë¬¸ìì—´(text)ë¡œ ë°›ê³  ì§ì ‘ íŒŒì‹±í•˜ëŠ” ê²½ìš°(dataType: "text")
        $.ajax({
        	  url: "postJSON-orderServer.jsp",
        	  type: "POST",
        	  dataType: "text",
        	  data: { name: name, phone: phone },
        	  success: function (serverData) {
        	    // ì„œë²„ ì›ë¬¸ ë¬¸ìì—´ ê·¸ëŒ€ë¡œ
        	    alert("Serverì—ì„œ ë°›ì€ ë‚´ìš© : \n" + serverData);

        	    var JSONData;
        	    try {
        	      JSONData = $.parseJSON(serverData);
        	    } catch (e) {
        	      alert("JSON íŒŒì‹± ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ ã… ã… \n" + e);
        	      return;
        	    }

        	    alert(
        	      "JSONData : \n" +
        	      "ì´ë¦„  : " + (JSONData.name || "") + "\n" +
        	      "ì „í™” : " + (JSONData.phone || "") + "\n" +
        	      "ì£¼ì†Œ : " + (JSONData.address || "")
        	    );

        	    $("#address").val(
        	      "ì´ë¦„  : " + (JSONData.name || "") + "\n" +
        	      "ì „í™” : " + (JSONData.phone || "") + "\n" +
        	      "ì£¼ì†Œ : " + (JSONData.address || "")
        	    );
        	  },
        	  error: function (request, status, error) {
        	    alert("ì—ëŸ¬ ë°œìƒ : " + request.status + "\n" + (error || ""));
        	  }
        	});

			//ì‘ë‹µì„ JSONìœ¼ë¡œ ë°›ëŠ” ê²½ìš° (dataType: "json")
//         $.ajax({
//         	  url: "postJSON-orderServer.jsp",
//         	  type: "POST",
//         	  dataType: "json",
//         	  data: { name: name, phone: phone },
//         	  success: function (serverData) {

//         	    var msg =
//         	      "Serverì—ì„œ ë°›ì€ ë‚´ìš© : \n" +
//         	      "ì´ë¦„  : " + (serverData.name || "") + "\n" +
//         	      "ì „í™” : " + (serverData.phone || "") + "\n" +
//         	      "ì£¼ì†Œ : " + (serverData.address || "");
//         	    alert(msg);

//         	    var JSONData = serverData;
//         	    var msg2 =
//         	      "JSONData : \n" +
//         	      "ì´ë¦„  : " + (JSONData.name || "") + "\n" +
//         	      "ì „í™” : " + (JSONData.phone || "") + "\n" +
//         	      "ì£¼ì†Œ : " + (JSONData.address || "");
//         	    alert(msg2);

//         	    $("#address").val(
//         	      "ì´ë¦„  : " + (JSONData.name || "") + "\n" +
//         	      "ì „í™” : " + (JSONData.phone || "") + "\n" +
//         	      "ì£¼ì†Œ : " + (JSONData.address || "")
//         	    );
//         	  },
//         	  error: function (request, status, error) {
//         	    alert("ì—ëŸ¬ ë°œìƒ : " + request.status + "\n" + (error || ""));
//         	  }
//         	});

        });
      });

      // ì—”í„°ë¡œ ì œì¶œ ë°©ì§€ (UX)
      $("#orderForm").on("submit", function(e){
        e.preventDefault();
        $("#btnSend").click();
      });

  </script>
</head>

<body>
  <h2>06jQueryAjaxJSON-orderClient</h2>

  <form id="orderForm">
    <div class="row">
      <label for="name">ì´ë¦„</label>
      <input type="text" id="name" name="name" placeholder="â™¥ì´ë¦„ ì…ë ¥â™¥">
    </div>
    <div class="row">
      <label for="phone">ì „í™”</label>
      <input type="text" id="phone" name="phone" placeholder="â™¥ë²ˆí˜¸ ì…ë ¥â™¥">
    </div>
    <div class="row">
      <button id="btnSend" class="btn" type="button">ì„œë²„ë¡œ ì „ì†¡ (POST)</button>
    </div>
    <div class="row">
      <label for="address">ê²°ê³¼</label><br/>
      <textarea id="address" placeholder="â˜…â˜…ë ìš©ë–¼ìš© ì„œë²„ ì‘ë‹µ(JSON)íŒŒì‹± ê²°ê³¼â˜…â˜…" readonly></textarea>
    </div>
  </form>
</body>
</html>
